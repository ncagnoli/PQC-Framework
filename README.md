# Performance Analysis Scripts

## English

This repository contains a set of Python scripts designed to measure and analyze the performance of client-server interactions, particularly focusing on CPU metrics.

### Scripts

- **`server_perf.py`**: This script starts a server process (e.g., `sshd`) under the `perf stat` command to collect performance data. It waits for a signal from the client to stop the server and save the collected data to a CSV file.

- **`client_perf.py`**: This script runs a client command (e.g., `ssh`) in a loop, also under `perf stat`, to measure the performance of connecting to the server. It signals the server to stop after each iteration and saves the performance data to a CSV file.

- **`config.py`**: This file contains the configuration for the server and client scripts, such as the server binary, client command, and other parameters.

- **`graph.py`**: This script generates a Bokeh plot from the CSV files generated by the server and client scripts, showing the CPU cycles per iteration.

- **`dual_axis_graph.py`**: This script generates a more advanced Bokeh plot with a dual Y-axis, comparing CPU cycles and instructions per iteration.

- **`run_server_loop.sh`**: This script runs the `server_perf.py` script in a loop, allowing for continuous testing.

- **`run_client_loop.sh`**: This script runs the `client_perf.py` script in a loop, allowing for continuous testing.

### Usage

1. **Configure the tests**: Edit the `config.py` file to set the desired parameters for the server and client.

2. **Run the server**: Execute the `run_server_loop.sh` script to start the server in a loop.

3. **Run the client**: Execute the `run_client_loop.sh` script to start the client and begin the performance tests.

4. **Generate the graphs**: Use the `graph.py` or `dual_axis_graph.py` scripts to generate plots from the resulting CSV files.

## Português

Este repositório contém um conjunto de scripts Python projetados para medir e analisar o desempenho de interações cliente-servidor, com foco em métricas de CPU.

### Scripts

- **`server_perf.py`**: Este script inicia um processo de servidor (e.g., `sshd`) sob o comando `perf stat` para coletar dados de desempenho. Ele aguarda um sinal do cliente para parar o servidor e salvar os dados coletados em um arquivo CSV.

- **`client_perf.py`**: Este script executa um comando de cliente (e.g., `ssh`) em um loop, também sob `perf stat`, para medir o desempenho da conexão com o servidor. Ele sinaliza o servidor para parar após cada iteração e salva os dados de desempenho em um arquivo CSV.

- **`config.py`**: Este arquivo contém a configuração para os scripts do servidor e do cliente, como o binário do servidor, o comando do cliente e outros parâmetros.

- **`graph.py`**: Este script gera um gráfico Bokeh a partir dos arquivos CSV gerados pelos scripts do servidor e do cliente, mostrando os ciclos de CPU por iteração.

- **`dual_axis_graph.py`**: Este script gera um gráfico Bokeh mais avançado com um eixo Y duplo, comparando ciclos de CPU e instruções por iteração.

- **`run_server_loop.sh`**: Este script executa o script `server_perf.py` em um loop, permitindo testes contínuos.

- **`run_client_loop.sh`**: Este script executa o script `client_perf.py` em um loop, permitindo testes contínuos.

### Uso

1. **Configure os testes**: Edite o arquivo `config.py` para definir os parâmetros desejados para o servidor e o cliente.

2. **Execute o servidor**: Execute o script `run_server_loop.sh` para iniciar o servidor em um loop.

3. **Execute o cliente**: Execute o script `run_client_loop.sh` para iniciar o cliente e começar os testes de desempenho.

4. **Gere os gráficos**: Use os scripts `graph.py` ou `dual_axis_graph.py` para gerar gráficos a partir dos arquivos CSV resultantes.
